<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <script src="../JS/canvasjs-2.2/canvasjs.min.js"></script>
        <title>Document</title>
        <style>
            body, .body-wrapper {
                display: flex;
                background-color: black;
                overflow: hidden;
                height: 100vh;
                justify-content: flex-end;
                flex-direction: column;
            }
            .graph {
                height: 100%;
            }
        </style>
        <script>
            function getFromBottle(url) {
                return [
                    {
                        y: 79.45,
                        label: "Critical"
                    }, {
                        y: 7.31,
                        label: "High"
                    }, {
                        y: 7.06,
                        label: "Medium"
                    }, {
                        y: 4.91,
                        label: "Low"
                    }, {
                        y: 1.26,
                        label: "Informational"
                    }
                ]
            }
            function getData(url) {
                // TODO fetch JS
                switch (url) {
                    case 1:
                        return [
                            {
                                type: "pie",
                                showInLegend: true,
                                toolTipContent: "<b>{label}</b>: ${y} (#y%)",
                                indexLabel: "{label}",
                                legendText: "{label} (#y%)",
                                indexLabelPlacement: "inside",
                                dataPoints: getFromBottle(url)
                            }
                        ]
                        break;
                    default:
                        return [
                            {
                                type: "pie",
                                startAngle: 240,
                                yValueFormatString: "##0.00\"%\"",
                                indexLabel: "{y}",
                                dataPoints: getFromBottle(url)
                            }
                        ]
                        break;
                }
            };
        </script>
    </head>
    <body>
        <div class="body-wrapper">
            <div class="graph" id="severidad"></div>
            <div class="graph" id="frecuentes"></div>
        </div>
        <script>

            window.onload = function () {
                CanvasJS.addColorSet("green2red", [ //colorSet Array

                    "#ff4660", //red
                    "#f48154", //orange
                    "#d9ff7f", //yellow
                    "#42ff58", //green
                    "#4c66ff", //blue
                ]);
                var chart = new CanvasJS.Chart("severidad", {
                    animationEnabled: false,
                    backgroundColor: "black",
                    theme: 'dark2',
                    colorSet: 'green2red',
                    legend: {
                        fontColor: 'white'
                    },
                    title: {
                        text: "Severidad de ataques Bloqueados",
                        fontColor: 'white'
                    },
                    data: getData('now what')
                });
                var chart2 = new CanvasJS.Chart("frecuentes", {
                    animationEnabled: false,
                    backgroundColor: "black",
                    theme: 'dark2',
                    legend: {
                        fontColor: 'white',
                        horizontalAlign: "left",
                        verticalAlign: "center"
                    },
                    title: {
                        text: "Categorías más frecuentes",
                        fontColor: 'white'
                    },
                    data: getData(1)
                });
                chart.render();
                chart2.render();

            }
        </script>
    </body>
</html>